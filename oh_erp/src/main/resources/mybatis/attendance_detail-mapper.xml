<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
	mapper는 구문을 만들 수 있는 영역
	일반적으로 테이블당 1개씩의 mapper를 둔다
	
	- namespace : 영역을 외부에서 부르기 위한 별칭(일반적으로 테이블 이름으로 사용)
	- id : 구문을 외부에서 호출하기 위한 식별값
	- parameterType : 구문을 실행하기 위해 필요한 데이터 유형(매개변수와 유사)
	- resultType : 구문이 실행된 결과 유형(반환형과 유사)
 -->
 <!-- namespace는 등록이랑 아무 상관이 없습니다 -->
<mapper namespace="attendance_detail">

<!-- 
parameterType하고 resultType 등록한걸로 쓰셔야됩니다
아까 보니까 attendance_detailDto라고 써있던데 절대 안됩니다(등록이 안됐기 때문에 안되겠죠)
 -->
	<insert id="regist" parameterType="attendance_detailDto">
	
	insert into attendance_detail(
attendance_no,
member_code,
attendance_date,
attendance_spot,
attendance_in_time1,
attendance_in_time2,
attendance_in_time3,
attendance_out_time1,
attendance_out_time2,
attendance_out_time3,
attendance_note,
attendance_total
	)values(
attendance_detail_seq.nextval,
#{member_code},
#{attendance_date},
#{attendance_spot},
#{attendance_in_time1},
#{attendance_in_time2},
#{attendance_in_time3},
#{attendance_out_time1},
#{attendance_out_time2},
#{attendance_out_time3},
#{attendance_note},
0	
	)
	</insert>

<select id="onlycode" parameterType="int" resultType="attendance_detailDto">
Select * from attendance_detail 
where member_code = #{member_code} 
</select>	
 
 
 <select id="list" resultType="attendance_detailDto">
 
SELECT 
member.member_code, 
member.member_name, 
member.member_position, 
attendance_detail.attendance_no, 
attendance_detail.attendance_date, 
attendance_detail.attendance_spot,
attendance_detail.attendance_in_time1,
attendance_detail.attendance_in_time2,
attendance_detail.attendance_in_time3,
attendance_detail.attendance_out_time1,
attendance_detail.attendance_out_time2,
attendance_detail.attendance_out_time3,
attendance_detail.attendance_note,
attendance_detail.attendance_total
FROM member, attendance_detail
WHERE member.member_code = attendance_detail.member_code; 
 
 </select>
</mapper>




